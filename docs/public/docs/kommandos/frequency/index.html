<!DOCTYPE html>
<html lang="de-DE" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="frequency # Mithilfe des Kommandos frequency lässt sich die Häufigkeitsverteilung aller Werte eines oder mehrerer Unterfelder bestimmen.
Beschreibung # Das Kommando frequency wird dazu genutzt, um die Häufigkeiten der Werte ein oder mehrerer Unterfelder zu bestimmen. Ist das zu untersuchende Feld bzw. Unterfeld wiederholbar, gehen alle Wertausprägungen eines Datensatzes in die Häufigkeitsverteilung ein. Die Ausgabe erfolgt standardmäßig im CSV-Format. Im folgenden Beispiel wird die Häufigkeitsverteilung des Unterfelds 002@.0 (Satzart) ermittelt:">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:title" content="" />
<meta property="og:description" content="frequency # Mithilfe des Kommandos frequency lässt sich die Häufigkeitsverteilung aller Werte eines oder mehrerer Unterfelder bestimmen.
Beschreibung # Das Kommando frequency wird dazu genutzt, um die Häufigkeiten der Werte ein oder mehrerer Unterfelder zu bestimmen. Ist das zu untersuchende Feld bzw. Unterfeld wiederholbar, gehen alle Wertausprägungen eines Datensatzes in die Häufigkeitsverteilung ein. Die Ausgabe erfolgt standardmäßig im CSV-Format. Im folgenden Beispiel wird die Häufigkeitsverteilung des Unterfelds 002@.0 (Satzart) ermittelt:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://deutsche-nationalbibliothek.github.io/pica-rs/book/docs/kommandos/frequency/" /><meta property="article:section" content="docs" />

<meta property="article:modified_time" content="2024-02-24T07:15:37+01:00" />

<title>Frequency | pica-rs</title>
<link rel="manifest" href="/pica-rs/book/manifest.json">
<link rel="icon" href="/pica-rs/book/favicon.png" >
<link rel="canonical" href="https://deutsche-nationalbibliothek.github.io/pica-rs/book/docs/kommandos/frequency/">
<link rel="stylesheet" href="/pica-rs/book/book.min.33a48f5432973b8ff9a82679d9e45d67f2c15d4399bd2829269455cfe390b5e8.css" integrity="sha256-M6SPVDKXO4/5qCZ52eRdZ/LBXUOZvSgpJpRVz&#43;OQteg=" crossorigin="anonymous"><!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/pica-rs/book/"><span>pica-rs</span>
  </a>
</h2>













  



  
  <ul>
    
      
        <li class="book-section-flat" >
          
  
  

  
    <a href="/pica-rs/book/docs/anleitungen/" class="">Anleitungen</a>
  

          
  <ul>
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/pica-rs/book/docs/installation/" class="">Installation</a>
  

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <a href="/pica-rs/book/docs/kommandos/" class="">Kommandos</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/pica-rs/book/docs/kommandos/cat/" class="">Cat</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/pica-rs/book/docs/kommandos/completions/" class="">Completions</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/pica-rs/book/docs/kommandos/convert/" class="">Convert</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/pica-rs/book/docs/kommandos/count/" class="">Count</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/pica-rs/book/docs/kommandos/explode/" class="">Explode</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/pica-rs/book/docs/kommandos/filter/" class="">Filter</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/pica-rs/book/docs/kommandos/frequency/" class="active">Frequency</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/pica-rs/book/docs/kommandos/hash/" class="">Hash</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/pica-rs/book/docs/kommandos/invalid/" class="">Invalid</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/pica-rs/book/docs/kommandos/partition/" class="">Partition</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/pica-rs/book/docs/kommandos/print/" class="">Print</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/pica-rs/book/docs/kommandos/slice/" class="">Slice</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/pica-rs/book/docs/kommandos/split/" class="">Split</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/pica-rs/book/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Frequency</strong>

  <label for="toc-control">
    
  </label>
</div>


  
 
      </header>

      
      
  <article class="markdown book-article"><h1 id="frequency">
  frequency
  <a class="anchor" href="#frequency">#</a>
</h1>
<p>Mithilfe des Kommandos <code>frequency</code> lässt sich die Häufigkeitsverteilung
aller Werte eines oder mehrerer Unterfelder bestimmen.</p>
<h2 id="beschreibung">
  Beschreibung
  <a class="anchor" href="#beschreibung">#</a>
</h2>
<p>Das Kommando <code>frequency</code> wird dazu genutzt, um die Häufigkeiten der
Werte ein oder mehrerer Unterfelder zu bestimmen. Ist das zu
untersuchende Feld bzw. Unterfeld wiederholbar, gehen alle
Wertausprägungen eines Datensatzes in die Häufigkeitsverteilung ein. Die
Ausgabe erfolgt standardmäßig im CSV-Format. Im folgenden Beispiel wird
die Häufigkeitsverteilung des Unterfelds <code>002@.0</code> (Satzart) ermittelt:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span>$ pica frequency -s <span style="color:#e6db74">&#34;002@.0&#34;</span> DUMP.dat.gz
</span></span><span style="display:flex;"><span>Tu1,6
</span></span><span style="display:flex;"><span>Tsz,2
</span></span><span style="display:flex;"><span>Tg1,1
</span></span><span style="display:flex;"><span>Tp1,1
</span></span><span style="display:flex;"><span>Tpz,1
</span></span><span style="display:flex;"><span>Ts1,1
</span></span></code></pre></div><h2 id="optionen">
  Optionen
  <a class="anchor" href="#optionen">#</a>
</h2>
<ul>
<li><code>-s</code>, <code>--skip-invalid</code> — überspringt jene Zeilen aus der Eingabe, die
nicht dekodiert werden konnten.</li>
<li><code>-i</code>, <code>--ignore-case</code> — Groß- und Kleinschreibung wird bei Vergleichen
ignoriert.</li>
<li><code>--strsim-threshold &lt;value&gt;</code> — Festlegen des Schwellenwerts beim
Ähnlichkeitsvergleich von Zeichenketten mittels <code>=*</code>.</li>
<li><code>--unique</code>, <code>-u</code>  — Doppelte Werte eines Datensatzes werden
ignorieren.</li>
<li><code>--reverse</code> — Ergebnisse werden in aufsteigender Reihenfolge
ausgegeben.</li>
<li><code>-l</code>, <code>--limit</code> <code>&lt;n&gt;</code> — Eingrenzung der Ausgabe auf die häufigsten
<code>&lt;n&gt;</code> Unterfeldwerte.</li>
<li><code>--threshold</code> <code>&lt;n&gt;</code> — Zeilen mit einer Häufigkeit &lt; <code>&lt;n&gt;</code> ignorieren.</li>
<li><code>--where</code> <code>&lt;filter&gt;</code> — Angabe eines Filters, der auf die erzeugten
Datensätze angewandt wird.</li>
<li><code>--and</code> <code>&lt;expr&gt;</code> — Hinzufügen eines zusätzlichen Filters mittels der
booleschen <code>&amp;&amp;</code>-Verknüpfung. Der ursprüngliche Filterausdruck
<code>&lt;filter&gt;</code> wird zum Ausdruck <code>&lt;filter&gt; &amp;&amp; &lt;expr&gt;</code>.</li>
<li><code>--or</code> <code>&lt;expr&gt;</code> — Hinzufügen eines zusätzlichen Filters mittels der
booleschen <code>||</code>-Verknüpfung. Der ursprüngliche Filterausdruck
<code>&lt;filter&gt;</code> wird zum Ausdruck <code>&lt;filter&gt; || &lt;expr&gt;</code>.</li>
<li><code>--not</code> <code>&lt;expr&gt;</code> — Hinzufügen eines zusätzlichen Filters. Der
ursprüngliche Filterausdruck <code>&lt;filter&gt;</code> wird zum Ausdruck <code>&lt;filter&gt; &amp;&amp; !(&lt;expr&gt;)</code>.</li>
<li><code>-H</code>, <code>--header</code> <code>&lt;header&gt;</code> — Kopfzeile, die den Ergebnissen
vorangestellt wird.</li>
<li><code>-t</code>, <code>--tsv</code> — Ausgabe erfolgt im TSV-Format.</li>
<li><code>--translit</code> <code>&lt;nf&gt;</code> — Ausgabe wird in die angegebene Normalform
transliteriert. Mögliche Werte: <code>nfd</code>, <code>nfkd</code>, <code>nfc</code> und <code>nfkc</code>.</li>
<li><code>-p</code>, <code>--progress</code> — Anzeige des Fortschritts, der die Anzahl der
eingelesenen gültigen sowie invaliden Datensätze anzeigt. Das
Aktivieren der Option erfordert das Schreiben der Datensätze in eine
Datei mittels <code>-o</code> bzw. <code>--output</code>.</li>
<li><code>-o</code>, <code>--output</code> — Angabe, in welche Datei die Ausgabe geschrieben
werden soll. Standardmäßig wird die Ausgabe in die Standardausgabe
<code>stdout</code> geschrieben.</li>
</ul>
<h2 id="konfiguration">
  Konfiguration
  <a class="anchor" href="#konfiguration">#</a>
</h2>
<!-- TODO: Link zum allgemeinen Kapitel über die Konfigurationsdatei -->
<p>Die Option zum Ignorieren invalider Datensätze lässt sich in der
<code>Pica.toml</code> konfigurieren:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span>[<span style="color:#a6e22e">frequency</span>]
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">skip-invalid</span> = <span style="color:#66d9ef">true</span>
</span></span></code></pre></div><p>Die Werte der Kommandozeilen-Optionen haben Vorrang vor den Werten aus
der Konfiguration.</p>
<h2 id="beispiele">
  Beispiele
  <a class="anchor" href="#beispiele">#</a>
</h2>
<h3 id="hinzufügen-einer-kopfzeile">
  Hinzufügen einer Kopfzeile
  <a class="anchor" href="#hinzuf%c3%bcgen-einer-kopfzeile">#</a>
</h3>
<p>Für die Dokumentation sowie die Verwendung in anderen Programmiersprachen
ist es häufig sinnvoll, eine Kopfzeile hinzuzufügen. Dies erfolgt mit der
Option <code>--header</code> bzw. <code>-H</code>. Die Namen der Spalten werden kommasepariert
angegeben. Eine Angabe von mehr als zwei Spalten ist nicht erlaubt.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span>$ pica frequency -s --header <span style="color:#e6db74">&#34;satzart,anzahl&#34;</span> <span style="color:#e6db74">&#34;002@.0&#34;</span> DUMP.dat.gz
</span></span><span style="display:flex;"><span>satzart,anzahl
</span></span><span style="display:flex;"><span>Tu1,6
</span></span><span style="display:flex;"><span>Tsz,2
</span></span><span style="display:flex;"><span>Tg1,1
</span></span><span style="display:flex;"><span>Tp1,1
</span></span><span style="display:flex;"><span>Tpz,1
</span></span><span style="display:flex;"><span>Ts1,1
</span></span></code></pre></div><h3 id="auswertung-mehrerer-felder-bzw-unterfelder">
  Auswertung mehrerer Felder bzw. Unterfelder
  <a class="anchor" href="#auswertung-mehrerer-felder-bzw-unterfelder">#</a>
</h3>
<p>Durch die Angabe von mehreren Pfadausdrücken lässt sich eine
Häufigkeitsverteilung über mehrere Untefelder ermitteln. Das folgende
Beispiel berechnet die Häufigkeit der Kombination aus Satzart (<code>002@.0</code>)
und dem Entitätencode(s) (<code>004B.a</code>):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span>$ pica frequency -s -H <span style="color:#e6db74">&#34;bbg,ent,count&#34;</span> <span style="color:#e6db74">&#34;002@.0, 004B.a&#34;</span> DUMP.dat.gz
</span></span><span style="display:flex;"><span>bbg,ent,count
</span></span><span style="display:flex;"><span>Tu1,wit,6
</span></span><span style="display:flex;"><span>Tsz,saz,2
</span></span><span style="display:flex;"><span>Tg1,gik,1
</span></span><span style="display:flex;"><span>Tp1,piz,1
</span></span><span style="display:flex;"><span>Tpz,piz,1
</span></span><span style="display:flex;"><span>Ts1,saz,1
</span></span></code></pre></div><p>Ebenfalls können auch mehrere Unterfelder ausgewertet werden. Eine
Auswertung der Häufigkeiten von verknüpften Sachbegriffen (Level 1) und
dem GND-Code für Beziehungen im Feld <code>041R</code> (Sachbegriff - Beziehung)
wird wie folgt ermittelt:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span>$ pica frequency -s <span style="color:#e6db74">&#39;041R{(7,4) | 7 == &#34;Ts1&#34;}&#39;</span> DUMP.dat.gz
</span></span><span style="display:flex;"><span>Ts1,beru,12
</span></span><span style="display:flex;"><span>Ts1,obal,5
</span></span><span style="display:flex;"><span>Ts1,vbal,3
</span></span><span style="display:flex;"><span>Ts1,obge,1
</span></span><span style="display:flex;"><span>Ts1,stud,1
</span></span></code></pre></div><h3 id="eingrenzung-auf-bestimmte-felder">
  Eingrenzung auf bestimmte Felder
  <a class="anchor" href="#eingrenzung-auf-bestimmte-felder">#</a>
</h3>
<p>Oftmals sollen nicht alle Felder in die Berechnung der Häufigkeiten
miteinbezogen werden. Dies ist bspw. dann der Fall, wenn sich Felder
anhand eines Unterfelds unterschieden lassen, wie etwa durch die Angabe
der Metadatenherkunft. Durch Verwenden eines Pfad-Ausdrucks in
{}-Notation können nur die Felder ausgewählt werden, die einem
bestimmten Kriterium entsprechen.</p>
<p>Das folgende Beispiel bezieht nur die Felder <code>041R</code> in die Auswertung
mit ein, bei denen ein Unterfeld <code>4</code> existiert, das entweder <code>berc</code> oder
<code>beru</code> ist; Felder die diesem Kriterium nicht entsprechen, werden
ignoriert.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span>$ pica frequency -s <span style="color:#e6db74">&#34;041R{ 9 | 4 in [&#39;berc&#39;, &#39;beru&#39;] }&#34;</span> DUMP.dat.gz
</span></span><span style="display:flex;"><span>040533093,2
</span></span><span style="display:flex;"><span>040250989,1
</span></span><span style="display:flex;"><span>040252434,1
</span></span><span style="display:flex;"><span>040290506,1
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><h3 id="eingrenzen-der-treffermenge">
  Eingrenzen der Treffermenge
  <a class="anchor" href="#eingrenzen-der-treffermenge">#</a>
</h3>
<p>Soll die Ergebnismenge auf die häufigsten <em>n</em> Unterfeldwerte
eingeschränkt werden, wird dies mit der Option <code>--limit</code> bzw. <code>-l</code>
erreicht. Das nachfolgende Beispeil ermittelt die 3 häufigsten Werte im
Feld <code>041R.4</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span>$ pica frequency -s --limit <span style="color:#ae81ff">3</span> <span style="color:#e6db74">&#34;041R.4&#34;</span> DUMP.dat.gz
</span></span><span style="display:flex;"><span>beru,12
</span></span><span style="display:flex;"><span>obal,5
</span></span><span style="display:flex;"><span>vbal,4
</span></span></code></pre></div><h3 id="eingrenzen-der-treffermenge-schwellenwert">
  Eingrenzen der Treffermenge (Schwellenwert)
  <a class="anchor" href="#eingrenzen-der-treffermenge-schwellenwert">#</a>
</h3>
<p>Die Treffermenge kann auch mittels der Angabe eines Schwellenwerts
eingeschänkt werden. Sollen nur die Werte angezeigt werden, die ab einem
Schwellenwert vorkommen, dann kann dies mit der Option
<code>--threshold</code>/<code>-t</code> erzielt werden:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span>$ pica frequency -s --threshold <span style="color:#ae81ff">4</span> <span style="color:#e6db74">&#34;041R.4&#34;</span> DUMP.dat.gz
</span></span><span style="display:flex;"><span>beru,12
</span></span><span style="display:flex;"><span>obal,5
</span></span><span style="display:flex;"><span>vbal,4
</span></span></code></pre></div><h3 id="änderung-der-sortierreihenfolge-limit">
  Änderung der Sortierreihenfolge (Limit)
  <a class="anchor" href="#%c3%a4nderung-der-sortierreihenfolge-limit">#</a>
</h3>
<p>Standardmäßig wird die Häufigkeitsverteilung absteigend ausgegeben,
d.h., der häufigste Wert steht in der Ausgabe oben<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>. Soll das
Verhalten so geändert werden, dass die Ausgabe aufsteigend sortiert wird,
kann dies mit der Option <code>--reverse</code> bzw. <code>-r</code> erfolgen. Das folgende
Kommando sucht nach den vier Satzarten, die am wenigsten vorkommen:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span>$ pica frequency -s -l <span style="color:#ae81ff">4</span> --reverse <span style="color:#e6db74">&#34;002@.0&#34;</span> DUMP.dat.gz
</span></span><span style="display:flex;"><span>Tg1,1
</span></span><span style="display:flex;"><span>Tp1,1
</span></span><span style="display:flex;"><span>Tpz,1
</span></span><span style="display:flex;"><span>Ts1,1
</span></span></code></pre></div><h3 id="ausgabe-im-tsv-format">
  Ausgabe im TSV-Format
  <a class="anchor" href="#ausgabe-im-tsv-format">#</a>
</h3>
<p>Die Ausgabe lässt sich mittels der Option <code>--tsv</code> (bzw. <code>-t</code>) in das
TSV-Format ändern.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ pica frequency -s -l3 --tsv tests/data/dump.dat.gz
</span></span><span style="display:flex;"><span>Tu1	<span style="color:#ae81ff">6</span>
</span></span><span style="display:flex;"><span>Tsz	<span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>Alle Werte mit gleicher Häufigkeit werden immer in lexikographisch
aufsteigender Reihenfolge sortiert. Dies erfolgt unabhängig vom
Parameter <code>--reverse</code>.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
  </main>

  
</body>
</html>












